% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_response_counts.R
\name{fetch_response_counts}
\alias{fetch_response_counts}
\title{Fetch response participation counts for one or more surveys}
\usage{
fetch_response_counts(
  surveyIDs,
  survey_names = names(surveyIDs),
  type = c("all", "distributions", "metadata", "responses")
)
}
\arguments{
\item{surveyIDs}{Character vector of one or more unique survey IDs, as
returned in the \code{id} column by \code{\link[=all_surveys]{all_surveys()}}. Elements may optionally be
\emph{named} with human-readable survey names, e.g.
\code{c("Household Survey" = "SV_abc123")}, in which case those names are used
as \code{survey_name} values without an extra API call.}

\item{survey_names}{Character vector of human-readable display names,
parallel to \code{surveyIDs} (same length, same order).
Defaults to \code{names(surveyIDs)}, so you can place labels directly on
the \code{surveyIDs} vector: \code{c("My Survey" = "SV_abc123")}.
Pass \code{NULL} explicitly to force name resolution via the Qualtrics
Metadata API (\code{\link[=metadata]{metadata()}}) for every survey.}

\item{type}{Character vector. Which count sources to include in the result.
One or more of:
\describe{
\item{\code{"distributions"}}{Distributions API columns (\verb{dist_*}).}
\item{\code{"metadata"}}{Metadata API columns (\verb{meta_*}) and the derived
\code{meta_response_rate}.}
\item{\code{"responses"}}{Response Export API columns (\verb{export_*}) and the
derived \code{export_response_rate}.}
\item{\code{"all"}}{All of the above (default).}
}
Multiple values may be combined, e.g. \code{type = c("metadata", "responses")}.}
}
\value{
A tibble with one row per survey and a \code{survey_id} / \code{survey_name}
identifier pair, followed by the requested source groups:

\strong{Distributions API} (\code{type} includes \code{"distributions"}; tracked email
sends only — excludes anonymous/direct-link access):
\describe{
\item{dist_invited}{Contacts sent a distribution link (\code{stats_sent}).}
\item{dist_in_progress}{Started but not submitted via a tracked link
(\code{stats_started - stats_finished}). Lower-bound estimate.}
\item{dist_completed}{Submitted via a tracked link (\code{stats_finished}).
Undercounts responses arriving via anonymous or direct links.}
}

\strong{Metadata API} (\code{type} includes \code{"metadata"}; all channels):
\describe{
\item{meta_completed}{All submitted responses regardless of channel
(\code{responsecounts$auditable}). \strong{Authoritative completed count.}}
\item{meta_response_rate}{\code{meta_completed / dist_invited}. Requires
\code{"distributions"} to also be included; \code{NA} otherwise or when
\code{dist_invited == 0}.}
}

\strong{Response Export API} (\code{type} includes \code{"responses"}; all channels):
\describe{
\item{export_completed}{Submitted responses across all channels, from
\code{fetch_survey(responses = "complete")}. \strong{Authoritative completed
count} (cross-check for \code{meta_completed}).}
\item{export_in_progress}{Responses currently in-progress across all
channels, from \code{fetch_survey(responses = "in_progress")}.
\strong{Authoritative in-progress count.}}
\item{export_response_rate}{\code{export_completed / dist_invited}. Requires
\code{"distributions"} to also be included; \code{NA} otherwise or when
\code{dist_invited == 0}.}
}
}
\description{
Retrieves a summary of survey participation from three Qualtrics API
sources: the Distributions API (invited/started/finished per tracked email
send), the Metadata API (authoritative submitted-response count across all
channels), and the Response Export API (authoritative in-progress and
completed counts across all channels).
}
\details{
If the request to the Qualtrics API made by this function fails, the request
will be retried. If you see these failures on a 500 error (such as a 504
error) be patient while the request is retried; it will typically succeed
on retrying. If you see other types of errors, retrying is unlikely to help.
}
\examples{
\dontrun{
# Register your Qualtrics credentials if you haven't already
qualtrics_api_credentials(
  api_key = "<YOUR-API-KEY>",
  base_url = "<YOUR-BASE-URL>"
)

surveys <- all_surveys()

# Single survey — name resolved via Metadata API
fetch_response_counts(surveys$id[1])

# Multiple surveys — names resolved via Metadata API
fetch_response_counts(surveys$id[1:3])

# Named survey ID vector — names used directly, no extra API call
fetch_response_counts(
  c(
    "Household eCheckup 2025" = "SV_abc123",
    "Business eCheckup 2025"  = "SV_def456"
  )
)

# Explicit survey_names vector — parallel to surveyIDs
fetch_response_counts(
  surveyIDs    = c("SV_abc123", "SV_def456"),
  survey_names = c("Household eCheckup 2025", "Business eCheckup 2025")
)

# Force name resolution via the API even when surveyIDs has names
fetch_response_counts(surveys$id[1:3], survey_names = NULL)

# Only metadata and response-export counts (skip Distributions API)
fetch_response_counts(surveys$id[1:3], type = c("metadata", "responses"))
}
}
